
<!DOCTYPE html>
<html lang="zh-Hans">

<head>
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />
  <meta charset="utf-8" />
  <meta name="author" content="花落无声@brangpd" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>近期文章 | 花落无声的站点</title>
  <link rel="stylesheet" href="/blog/css/style.css"/>
  <link rel="stylesheet" href="/blog/css/chroma.css"/>
  <link rel="stylesheet" href="/blog/css/fonts.css"/>
  <link rel="stylesheet" href="/blog/css/to_top_button.css"/>
  <link rel="stylesheet" href="/blog/abcjs/abcjs-audio.css" />
<script defer src="/blog/abcjs/abcjs-basic-min.js"></script>


</head>

<body>
  <nav>
    <ul class="menu">
      
      <li><a href="/blog/">主页</a></li>
      
      <li><a href="/blog/p/">近期</a></li>
      
      <li><a href="/blog/pall/">全部</a></li>
      
      <li><a href="/blog/categories/">归档</a></li>
      
      <li><a href="/blog/tags/">标签</a></li>
      
      <li><a href="/blog/index.xml">订阅</a></li>
      
    </ul>
  </nav>


<h1 class="h0">近期文章</h1>







<section class="list-block">
  <div class="list-title-line">
    <div style="float: right;">
      (2020.08.03)
    </div>
    <div>
      <a href="/blog/p/2020/08/03/kubernetes%E5%AD%98%E5%82%A8/">
        <span class="list-title">Kubernetes存储</span>
        
      </a>
    </div>
  </div>
  
  <div class="list-summary">
    
    
    
    
    <h1 id="参考"><a href="#%e5%8f%82%e8%80%83" class="header-anchor">参考</a></h1>
<p><a href="https://kubernetes.io/docs/concepts/storage/">https://kubernetes.io/docs/concepts/storage/</a></p>
<h1 id="volumes"><a href="#volumes" class="header-anchor">Volumes</a></h1>
<p>欲解决的问题: 持久化存储, (跨pod) 存储共享.</p>
<p>pod在配置中说明要使用的volumes, 通过<code>.spec.volumes</code>, 说明在哪里mount, 通过<code>.spec.containers[*].volumeMounts</code>.</p>
<p>云计算使用的各种存储工具. 所有支持的方案详见<a href="https://kubernetes.io/docs/concepts/storage/volumes/#types-of-volumes">Types of Volumes</a>. 官方直接支持的云存储方案如AWS EBS, Azure File, Azure Disk等. 此外, 像阿里云提供的云盘存储卷, NAS存储卷, 对象存储卷等, 最好在阿里云自己提供的ECS或容器服务Kubernetes版, 或者也可以装插件 (OSS外网访问成本太高不现实, 其他几个要非专有网络的服务应该要申请). 阿里云的云存储方案提供FlexVolume和CSI, 详见其<a href="https://www.alibabacloud.com/help/zh/doc-detail/157025.htm">官方文档</a>. (目前不太清楚工业界使用什么样的方案, 也不太清楚成本的估计)</p>
<p>有一些不通过云存储而通过主机的形式, 比如直接挂载到本机node上, 或者有专门的主机(不管是真物理主机还是虚拟云主机甚至是容器, 总之可以mount到上面的文件系统).</p>
<p>几种可能比较重要 (不一定常用, 不一定适合生产环境例如hostPath) 的卷:</p>
<h2 id="configmap-secret"><a href="#configmap-secret" class="header-anchor">configMap, secret</a></h2>
<p>如<a href="/blog/p/2020/08/03/kubernetes%E9%85%8D%E7%BD%AE/">配置</a>一文提及, ConfigMap与secret作为两种配置, 本身可以挂载成 &ldquo;文件/路径&rdquo; 的形式来表示 &ldquo;键/值&rdquo;. 示例如下, 更多信息见配置相关文档.</p>
  </div>
  
</section>


<section class="list-block">
  <div class="list-title-line">
    <div style="float: right;">
      (2020.08.03)
    </div>
    <div>
      <a href="/blog/p/2020/08/03/kubernetes%E9%85%8D%E7%BD%AE/">
        <span class="list-title">Kubernetes配置</span>
        
      </a>
    </div>
  </div>
  
  <div class="list-summary">
    
    
    
    
    <h1 id="参考"><a href="#%e5%8f%82%e8%80%83" class="header-anchor">参考</a></h1>
<p><a href="https://kubernetes.io/docs/concepts/configuration/">https://kubernetes.io/docs/concepts/configuration/</a></p>
<h1 id="最佳实践"><a href="#%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5" class="header-anchor">最佳实践</a></h1>
<p>详见 <a href="https://kubernetes.io/docs/concepts/configuration/overview/">https://kubernetes.io/docs/concepts/configuration/overview/</a> .</p>
<h1 id="configmaps"><a href="#configmaps" class="header-anchor">ConfigMaps</a></h1>
<p>放一些不私密的键值对配置. pod可通过环境变量, 命令行参数, 或者卷中的配置文件取得ConfigMap.</p>
<p>配置将自动但可能不及时地更新.</p>
  </div>
  
</section>


<section class="list-block">
  <div class="list-title-line">
    <div style="float: right;">
      (2020.08.04)
    </div>
    <div>
      <a href="/blog/p/2020/08/04/kubernetes%E7%BD%91%E7%BB%9C%E6%9C%8D%E5%8A%A1%E7%9B%B8%E5%85%B3/">
        <span class="list-title">Kubernetes网络服务相关</span>
        
      </a>
    </div>
  </div>
  
  <div class="list-summary">
    
    
    
    
    <h1 id="参考"><a href="#%e5%8f%82%e8%80%83" class="header-anchor">参考</a></h1>
<p><a href="https://kubernetes.io/docs/concepts/services-networking/">https://kubernetes.io/docs/concepts/services-networking/</a></p>
<h1 id="service"><a href="#service" class="header-anchor">Service</a></h1>
<p>服务, 应该叫网络服务.</p>
<h2 id="定义"><a href="#%e5%ae%9a%e4%b9%89" class="header-anchor">定义</a></h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-yaml" data-lang="yaml"><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l">v1</span><span class="w">
</span><span class="w"></span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l">Service</span><span class="w">
</span><span class="w"></span><span class="nt">metadata</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">my-service</span><span class="w">
</span><span class="w"></span><span class="nt">spec</span><span class="p">:</span><span class="w">
</span><span class="w">  </span><span class="nt">selector</span><span class="p">:</span><span class="w">
</span><span class="w">    </span><span class="nt">app</span><span class="p">:</span><span class="w"> </span><span class="l">MyApp</span><span class="w">
</span><span class="w">  </span><span class="nt">ports</span><span class="p">:</span><span class="w">
</span><span class="w">    </span>- <span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l">TCP</span><span class="w"> </span><span class="c"># 默认, 还有UDP, HTTP, PROXY</span><span class="w">
</span><span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">http</span><span class="w"> </span><span class="c"># pod指定的名字可以引用</span><span class="w">
</span><span class="w">      </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="m">80</span><span class="w">
</span><span class="w">      </span><span class="nt">targetPort</span><span class="p">:</span><span class="w"> </span><span class="m">9376</span><span class="w">
</span><span class="w">    </span>- <span class="nt">protocol</span><span class="p">:</span><span class="w"> </span><span class="l">TCP</span><span class="w">
</span><span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l">https</span><span class="w">
</span><span class="w">      </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="m">443</span><span class="w">
</span><span class="w">      </span><span class="nt">targetPort</span><span class="p">:</span><span class="w"> </span><span class="m">9337</span><span class="w">
</span></code></pre></td></tr></table>
</div>
</div><p>如果创建一个没有selector的service, 应自行指定endpoint:</p>
  </div>
  
</section>


<section class="list-block">
  <div class="list-title-line">
    <div style="float: right;">
      (2020.08.05)
    </div>
    <div>
      <a href="/blog/p/2020/08/05/dockerfile%E5%B8%B8%E7%94%A8%E9%A1%B9%E8%AE%B0%E5%BD%95/">
        <span class="list-title">Dockerfile常用项记录</span>
        
      </a>
    </div>
  </div>
  
  <div class="list-summary">
    
    
    
    
    <h1 id="参考"><a href="#%e5%8f%82%e8%80%83" class="header-anchor">参考</a></h1>
<p><a href="https://docs.docker.com/engine/reference/builder/">https://docs.docker.com/engine/reference/builder/</a></p>
<h1 id="dockerfile基础"><a href="#dockerfile%e5%9f%ba%e7%a1%80" class="header-anchor">Dockerfile基础</a></h1>
<h2 id="命令行构建"><a href="#%e5%91%bd%e4%bb%a4%e8%a1%8c%e6%9e%84%e5%bb%ba" class="header-anchor">命令行构建</a></h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-sh" data-lang="sh">docker build -f ./Dockerfile路径 -t 新镜像:版本号 -t 可以放多个 .
</code></pre></td></tr></table>
</div>
</div><p>通过Dockerfile与上下文(文件目录或URL)构建镜像.</p>
<p>可以写一个<code>.dockerignore</code>文件忽略某些文件, 这些文件不会被<code>ADD</code>或<code>COPY</code>. 写法参考<code>.gitignore</code>.</p>
<h2 id="dockerfile命令格式"><a href="#dockerfile%e5%91%bd%e4%bb%a4%e6%a0%bc%e5%bc%8f" class="header-anchor">Dockerfile命令格式</a></h2>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-dockerfile" data-lang="dockerfile"><span class="c"># 行内注释, 只有#放在行首才表示注释, #在其他地方均不表示注释</span><span class="err">
</span><span class="err"></span>INSTRUCTION arguments<span class="err">
</span></code></pre></td></tr></table>
</div>
</div><p>在最上方可写注释做预处理指令. 预处理指令包括: <code>syntax</code>, 指定语法版本号; <code>escape</code>, 指定转义符号. 略.</p>
<p>环境变量与shell类似, 以<code>$(v)</code>, <code>$v</code>的形式引用.</p>
  </div>
  
</section>


<section class="list-block">
  <div class="list-title-line">
    <div style="float: right;">
      (2020.08.05)
    </div>
    <div>
      <a href="/blog/p/2020/08/05/kubernetes%E6%8E%A7%E5%88%B6%E5%99%A8-%E8%B5%84%E6%BA%90/">
        <span class="list-title">Kubernetes控制器/资源</span>
        
      </a>
    </div>
  </div>
  
  <div class="list-summary">
    
    
    
    
    <p>介绍一些常见的所谓控制器. 控制器目的在于控制pod. 每个控制器都作为资源的一种. 包括:</p>
<ul>
<li>ReplicaSet (rs)</li>
<li>ReplicationController (rc)</li>
<li>Deployment (deploy)</li>
<li>StatefulSet (sts)</li>
<li>DaemonSet (ds)</li>
<li>Job</li>
<li>CronJob (cj)</li>
</ul>

  </div>
  
</section>


<section class="list-block">
  <div class="list-title-line">
    <div style="float: right;">
      (2020.08.06)
    </div>
    <div>
      <a href="/blog/p/2020/08/06/kubernetes-pod/">
        <span class="list-title">Kubernetes Pod</span>
        
      </a>
    </div>
  </div>
  
  <div class="list-summary">
    
    
    
    
    <h1 id="参考"><a href="#%e5%8f%82%e8%80%83" class="header-anchor">参考</a></h1>
<p><a href="https://kubernetes.io/docs/concepts/workloads/pods/">https://kubernetes.io/docs/concepts/workloads/pods/</a></p>
<h1 id="基础"><a href="#%e5%9f%ba%e7%a1%80" class="header-anchor">基础</a></h1>
<p>pod是最核心的一个概念. 它是一系列容器的组合体, kubernetes集群中能被部署的最小单元.</p>
<p>重要配置项示例如下, 更多配置项见<a href="https://kubernetes.io/docs/tasks/configure-pod-container/">Configure Pods and Containers</a>.</p>
  </div>
  
</section>


<section class="list-block">
  <div class="list-title-line">
    <div style="float: right;">
      (2020.08.07)
    </div>
    <div>
      <a href="/blog/p/2020/08/07/hosts-dns%E7%9B%B8%E5%85%B3/">
        <span class="list-title">hosts, DNS相关</span>
        
      </a>
    </div>
  </div>
  
  <div class="list-summary">
    
    
    
    
    <p>在国内访问Github Gist受到DNS污染.</p>
<p>解决方案: 用站长之家的<a href="http://tool.chinaz.com/dns/">DNS查询工具</a>, 搜<code>github.com</code>与<code>gist.github.com</code>, 随便找个最快的, 放到hosts文件里.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-txt" data-lang="txt">13.114.40.48 gist.github.com
52.192.72.89 github.com
</code></pre></td></tr></table>
</div>
</div>
  </div>
  
</section>


<section class="list-block">
  <div class="list-title-line">
    <div style="float: right;">
      (2020.08.10)
    </div>
    <div>
      <a href="/blog/p/%E6%97%A5%E8%AF%AD%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93/%E5%8A%A9%E8%AF%8D/">
        <span class="list-title">日语学习总结：助词</span>
        
      </a>
    </div>
  </div>
  
  <div class="list-summary">
    
    
    
    
    现代日语中，词类分为附属语和自立语。附属语是无法单独存在，必须依附于自立语存在的词。附属语中，没有活用（词形变化）的为助词，有活用的为助动词。本文总结日语助词的用法。
  </div>
  
</section>


<section class="list-block">
  <div class="list-title-line">
    <div style="float: right;">
      (2020.08.12)
    </div>
    <div>
      <a href="/blog/p/%E6%97%A5%E8%AF%AD%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93/%E5%8A%A9%E5%8A%A8%E8%AF%8D/">
        <span class="list-title">日语学习总结：助动词</span>
        
      </a>
    </div>
  </div>
  
  <div class="list-summary">
    
    
    
    
    在日语里，助动词属于附属语中存在活用的一类，也称为补助动词，与助词类似，助动词不能单独存在。助动词需要有接续，有活用，并且表达一定的意义。助动词要附属于其他词语之后，表达或改变句子的语意，如时态、语态、体态、语气等。本文总结日语助动词的用法。
  </div>
  
</section>


<section class="list-block">
  <div class="list-title-line">
    <div style="float: right;">
      (2020.08.12)
    </div>
    <div>
      <a href="/blog/p/%E6%97%A5%E8%AF%AD%E5%AD%A6%E4%B9%A0%E6%80%BB%E7%BB%93/%E5%BD%A2%E5%AE%B9%E8%AF%8D%E5%BD%A2%E5%AE%B9%E5%8A%A8%E8%AF%8D/">
        <span class="list-title">日语学习总结：形容词、形容动词</span>
        
      </a>
    </div>
  </div>
  
  <div class="list-summary">
    
    
    
    
    形容词，是日语词类中用言的一类，具有性质或状态的描述意义。形容动词和形容词同样具有性质或状态的描述意义，但又与形容词形式不同。本文总结形容词和形容动词的用法。
  </div>
  
</section>




    <ul class="pagination pagination-default">
      <li class="page-item">
        <a href="/blog/p/" aria-label="First" class="page-link" role="button"><span aria-hidden="true">&laquo;&laquo;</span></a>
      </li>
      <li class="page-item">
        <a href="/blog/p/page/3/" aria-label="Previous" class="page-link" role="button"><span aria-hidden="true">&laquo;</span></a>
      </li>
      <li class="page-item">
        <a href="/blog/p/page/2/" aria-label="Page 2" class="page-link" role="button">2</a>
      </li>
      <li class="page-item">
        <a href="/blog/p/page/3/" aria-label="Page 3" class="page-link" role="button">3</a>
      </li>
      <li class="page-item active">
        <a href="#" aria-current="page" aria-label="Page 4" class="page-link" role="button">4</a>
      </li>
      <li class="page-item">
        <a href="/blog/p/page/5/" aria-label="Page 5" class="page-link" role="button">5</a>
      </li>
      <li class="page-item">
        <a href="/blog/p/page/6/" aria-label="Page 6" class="page-link" role="button">6</a>
      </li>
      <li class="page-item">
        <a href="/blog/p/page/5/" aria-label="Next" class="page-link" role="button"><span aria-hidden="true">&raquo;</span></a>
      </li>
      <li class="page-item">
        <a href="/blog/p/page/9/" aria-label="Last" class="page-link" role="button"><span aria-hidden="true">&raquo;&raquo;</span></a>
      </li>
    </ul>

<footer>

© <a href="mailto:brangpd@outlook.com">brangpd</a>
</footer>
<button onclick="topFunction()" id="toTopButton">↑↑↑</button>
<script src="/blog/js/to_top_button.js"></script>
<script src="/blog/js/custom.js"></script>
</body>
</html>